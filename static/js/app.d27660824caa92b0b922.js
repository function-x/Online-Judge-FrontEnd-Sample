webpackJsonp([2,0],[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=r(8),o=n(a),s=r(24),u=n(s),i=r(82),l=n(i),d=r(16),f=n(d);r(72),o.default.use(u.default),new o.default({el:"#app",template:"<App/>",components:{App:l.default},router:f.default})},,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={url:"https://xjtu-orange-juice.herokuapp.com"}},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){setTimeout(function(){e.$emit("routeTo",t)},r||1e3)}},,,,,,,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(24),o=n(a),s=r(85),u=n(s),i=r(83),l=n(i),d=r(90),f=n(d),c=r(86),m=n(c),p=r(88),v=n(p);t.default=new o.default({routes:[{path:"/login",component:u.default},{path:"/",component:l.default},{path:"/register",component:f.default},{path:"/logout",component:m.default},{path:"/profile",component:v.default}]})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(87),o=n(a),s=r(16),u=n(s),i=r(6),l=n(i),d=r(5),f=n(d);t.default={name:"app",data:function(){return{currentPath:u.default.currentRoute.path,user:""}},components:{NavBar:o.default},methods:{route:function(e){u.default.push({path:e}),this.currentPath=u.default.currentRoute.path},updateLoginState:function(){var e=this;l.default.get(f.default.url+"/user/profile").withCredentials().end(function(t,r){t||0!==r.body.code?e.user="":e.user=r.body.body.username})}},created:function(){this.updateLoginState()}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"home-page"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=r(6),s=n(o),u=r(5),i=n(u);t.default={name:"login-form",data:function(){return{formData:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{login:function(){var e=this;this.$refs.form.validate(function(t){if(t){var r={username:e.formData.username,password:e.formData.password};e.$emit("pending"),s.default.post(i.default.url+"/user/sign-in").withCredentials().send(r).end(function(t,r){t?e.$emit("error",{code:-1,msg:"network error"}):0===r.body.code?e.$emit("success"):e.$emit("error",r.body)})}})}},components:{ElForm:a.Form,ElFormItem:a.FormItem,ElInput:a.Input,ElButton:a.Button}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(84),o=n(a),s=r(7),u=n(s),i=r(3);t.default={name:"login-page",data:function(){return{message:{text:"",type:"info"}}},methods:{error:function(e){this.message={text:e.msg,type:"error"}},pending:function(){this.message={text:"登录中...",type:"info"}},success:function(){this.message={text:"登录成功",type:"success"},this.$emit("login"),(0,u.default)(this,"/")}},components:{LoginForm:o.default,ElRow:i.Row,ElCol:i.Col,ElAlert:i.Alert}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=r(6),s=n(o),u=r(5),i=n(u),l=r(7),d=n(l);t.default={name:"logout-page",data:function(){return{type:"info",text:"退出中"}},components:{ElAlert:a.Alert,ElRow:a.Row,ElCol:a.Col},props:["username"],created:function(){var e=this;return""===this.username?(this.type="error",this.text="未登录",void(0,d.default)(this,"/")):void s.default.get(i.default.url+"/user/sign-out").withCredentials().end(function(t,r){t?(e.type="error",e.text="网络错误"):(e.type="success",e.text="退出成功",e.$emit("logout"),(0,d.default)(e,"/"))})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.default={name:"nav-bar",data:function(){return{}},methods:{select:function(e){this.$emit("routeTo",e)}},components:{ElMenu:n.Menu,ElMenuItem:n.MenuItem},props:["activeItem","username"]}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=r(6),s=n(o),u=r(5),i=n(u),l=r(7),d=n(l);t.default={name:"profile-page",data:function(){return{alert:{type:"info",text:"获取中..."},data:{username:"",email:""}}},components:{ElAlert:a.Alert,ElRow:a.Row,ElCol:a.Col},props:["username"],created:function(){var e=this;return""===this.username?(this.alert.type="error",this.alert.text="未登录",void(0,d.default)(this,"/login")):void s.default.get(i.default.url+"/user/profile").withCredentials().end(function(t,r){t?(e.alert.type="error",e.alert.text="网络错误"):0!==r.body.code?(e.alert.type="error",e.alert.text="API错误"+r.body.code,7===r.body.code&&(e.alert.text="登录状态失效",e.$emit("logout"),(0,d.default)(e,"/login"))):(e.alert.type="success",e.alert.text="",e.data.username=r.body.body.username,e.data.email=r.body.body.email)})}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),o=r(6),s=n(o),u=r(5),i=n(u);t.default={name:"register-form",data:function(){return{formData:{username:"",email:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入Email",trigger:"blur"},{type:"email",message:"Email格式不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:7,message:"请至少设置7位密码",trigger:"blur"},{pattern:/^([0-9]+[a-zA-Z]+|[a-zA-Z]+[0-9]+)[0-9a-zA-Z]*$/,message:"密码必须同时包含字母和数字",trigger:"blur"}]}}},methods:{register:function(){var e=this;this.$refs.form.validate(function(t){if(t){var r={username:e.formData.username,email:e.formData.email,password:e.formData.password};e.$emit("pending"),s.default.post(i.default.url+"/user").withCredentials().send(r).end(function(t,r){t?e.$emit("error",{code:-1,errors:"network error"}):0===r.body.code?e.$emit("success"):e.$emit("error",r.body)})}})}},components:{ElForm:a.Form,ElFormItem:a.FormItem,ElInput:a.Input,ElButton:a.Button}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(89),o=n(a),s=r(3),u=r(7),i=n(u);t.default={name:"register-page",data:function(){return{message:{text:"",type:"info"}}},methods:{error:function(e){var t="";if("string"==typeof e.errors)t=e.errors;else for(var r in e.errors)e.errors.hasOwnProperty(r)&&(t+=r+": "+e.errors[r].message+"\n");this.message={text:t,type:"error"}},pending:function(){this.message={text:"注册中...",type:"info"}},success:function(){this.message={text:"注册成功",type:"success"},(0,i.default)(this,"/")}},components:{RegisterForm:o.default,ElRow:s.Row,ElCol:s.Col,ElAlert:s.Alert}}},,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,function(e,t,r){e.exports=r.p+"static/img/logo.d1f0144.jpg"},function(e,t,r){var n,a;r(75),n=r(47);var o=r(98);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=n},function(e,t,r){var n,a;n=r(48);var o=r(95);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=n},function(e,t,r){var n,a;r(73),n=r(49);var o=r(94);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-2ced1cf8",e.exports=n},function(e,t,r){var n,a;n=r(50);var o=r(96);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=n},function(e,t,r){var n,a;n=r(51);var o=r(92);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=n},function(e,t,r){var n,a;n=r(52);var o=r(91);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=n},function(e,t,r){var n,a;r(76),n=r(53);var o=r(99);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-8d2e127a",e.exports=n},function(e,t,r){var n,a;r(74),n=r(54);var o=r(97);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-571609a8",e.exports=n},function(e,t,r){var n,a;n=r(55);var o=r(93);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,e.exports=n},function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"nav"},[t("el-menu",{attrs:{mode:"horizontal","default-active":e.activeItem},on:{select:e.select}},[t("el-menu-item",{attrs:{index:"/"}},[e._v("首页")]),e._v(" "),e.username?e._e():t("el-menu-item",{attrs:{index:"/login"}},[e._v("登录")]),e._v(" "),e.username?e._e():t("el-menu-item",{attrs:{index:"/register"}},[e._v("注册")]),e._v(" "),e.username?t("el-menu-item",{attrs:{index:"/profile"}},[e._v(e._s(e.username))]):e._e(),e._v(" "),e.username?t("el-menu-item",{attrs:{index:"/logout"}},[e._v("退出")]):e._e()])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"logoutpage"},[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{sm:9,md:6}},[t("el-alert",{attrs:{type:e.type,title:e.text}})])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"registerpage"},[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{sm:9,md:6}},[t("h1",[e._v("注册")]),e._v(" "),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.message.text,expression:"message.text"}],attrs:{title:e.message.text,type:e.message.type}}),e._v(" "),t("register-form",{on:{error:e.error,pending:e.pending,success:e.success}})])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"loginform"},[t("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules},on:{submit:function(t){t.preventDefault(),e.login(t)}}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{placeholder:"用户名",type:"text"},domProps:{value:e.formData.username},on:{input:function(t){e.formData.username=t}}})]),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{placeholder:"密码",type:"password"},domProps:{value:e.formData.password},on:{input:function(t){e.formData.password=t}}})]),e._v(" "),t("el-form-item",[t("el-button",{staticClass:"login-button",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])])])])},staticRenderFns:[]}},function(e,t,r){e.exports={render:function(){var e=this;e.$createElement,e._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"homepage"},[t("img",{attrs:{src:r(81)}}),e._v(" "),t("h1",[e._v("Welcome to Orange Juice Online Judge System")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"loginpage"},[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{sm:9,md:6}},[t("h1",[e._v("登录")]),e._v(" "),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.message.text,expression:"message.text"}],attrs:{title:e.message.text,type:e.message.type}}),e._v(" "),t("login-form",{on:{error:e.error,pending:e.pending,success:e.success}})])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"registerform"},[t("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules},on:{submit:function(t){t.preventDefault(),e.register(t)}}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{placeholder:"用户名",type:"text"},domProps:{value:e.formData.username},on:{input:function(t){e.formData.username=t}}})]),e._v(" "),t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.formData.email,expression:"formData.email"}],attrs:{placeholder:"邮箱",type:"email"},domProps:{value:e.formData.email},on:{input:function(t){e.formData.email=t}}})]),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{placeholder:"密码",type:"password"},domProps:{value:e.formData.password},on:{input:function(t){e.formData.password=t}}})]),e._v(" "),t("el-form-item",[t("el-button",{staticClass:"register-button",attrs:{type:"primary"},on:{click:e.register}},[e._v("注册")])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{attrs:{id:"app"}},[t("nav-bar",{attrs:{id:"nav-bar","active-item":e.currentPath,username:e.user},on:{routeTo:e.route}}),e._v(" "),t("router-view",{attrs:{username:e.user},on:{routeTo:e.route,login:e.updateLoginState,logout:e.updateLoginState}})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"profilepage"},[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{sm:9,md:6}},[t("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.alert.text,expression:"alert.text"}],attrs:{type:e.alert.type,title:e.alert.text}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:""===e.alert.text,expression:"alert.text === ''"}],staticClass:"data"},[t("p",{staticClass:"field-name"},[e._v("用户名")]),e._v(" "),t("p",[e._v(e._s(e.data.username))]),e._v(" "),t("p",{staticClass:"field-name"},[e._v("Email")]),e._v(" "),t("p",[e._v(e._s(e.data.email))])])])])])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.d27660824caa92b0b922.js.map